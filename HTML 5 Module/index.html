<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Community Portal</title>

  <!-- Internal CSS for styling -->
  <style>
    /* Welcome Banner Styling */
    #welcomeBanner {
      background-color: #007BFF;
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 1.2rem;
      border-radius: 5px;
      margin: 10px;
    }

    /* Highlight Class */
    .highlight {
      background-color: yellow;
      padding: 2px 6px;
      border-radius: 3px;
    }

    /* Gallery Image Styling */
    .gallery-img {
      width: 150px;
      height: auto;
      border: 2px solid #444;
      border-radius: 5px;
    }

    /* Table Styling */
    table {
      width: 100%;
      text-align: center;
      border-spacing: 20px;
    }

    caption {
      font-weight: bold;
      margin-bottom: 10px;
    }

    nav ul {
      list-style-type: none;
      padding: 0;
      display: flex;
      gap: 20px;
      background-color: #f2f2f2;
      margin: 0;
      padding: 10px;
    }

    nav ul li a {
      text-decoration: none;
      color: #333;
      font-weight: bold;
    }

    section {
      margin: 20px;
    }

    footer {
      text-align: center;
      margin-top: 40px;
      padding: 10px;
      background-color: #f2f2f2;
    }
form {
  background-color: #f9f9f9;
  padding: 20px;
  border: 2px solid #ccc;
  border-radius: 8px;
  max-width: 500px;
  margin: auto;
}

form input, form select, form textarea {
  width: 100%;
  padding: 10px;
  margin-top: 4px;
  margin-bottom: 15px;
  border: 1px solid #aaa;
  border-radius: 4px;
  box-sizing: border-box;
}

form button {
  background-color: #007BFF;
  color: white;
  border: none;
  padding: 10px 20px;
  font-weight: bold;
  border-radius: 4px;
  cursor: pointer;
}

form button:hover {
  background-color: #0056b3;
}

output {
  display: block;
  margin-top: 10px;
  color: green;
  font-weight: bold;
}
#feedbackForm {
  background-color: #f2f2f2;
  padding: 20px;
  border: 2px solid #ccc;
  border-radius: 10px;
  max-width: 500px;
  margin: 20px auto;
}

#feedbackForm input,
#feedbackForm select,
#feedbackForm textarea {
  width: 100%;
  padding: 8px;
  margin: 10px 0;
  box-sizing: border-box;
}

#feedbackForm button {
  padding: 10px 20px;
  background-color: #007BFF;
  color: white;
  border: none;
  font-weight: bold;
  border-radius: 5px;
  cursor: pointer;
}

#feedbackForm button:hover {
  background-color: #0056b3;
}

img.enlarged {
  width: 400px !important;
  cursor: zoom-out;
}


  </style>
</head>
<body>

  <!-- Navigation -->
  <nav>
    <ul>
      <li><a href="#home">Home</a></li>
      <li><a href="#events">Events</a></li>
      <li><a href="#contact">Contact</a></li>
      <li><a href="help.html" target="_blank">Help</a></li>
    </ul>
  </nav>

  <!-- Welcome Banner -->
  <div id="welcomeBanner">
    Welcome back, <span class="highlight">User</span>!
    <span style="color: red; font-weight: bold;">Special Offer: 50% Off Today!</span>
  </div>

  <!-- Main -->
  <main>

    <!-- Home Section -->
    <section id="home">
      <h1>Welcome to the Portal</h1>
      <p>This is the home section.</p>
    </section>

    <!-- Events Section -->
    <section id="events">
      <h2>Upcoming Events</h2>
      <p class="highlight">Don't miss our featured event this weekend!</p>
    </section>

    <!-- Contact Section -->
    <section id="contact">
      <h2>Contact Us</h2>
      <p>Get in touch via this section.</p>
    </section>

    <!-- Community Events Gallery -->
    <section id="gallery">
      <h2>Past Community Events</h2>
      <table>
        <caption>Memorable Moments from Our Events</caption>
        <tr>
          <td>
            <img src="music_night.jpg" alt="Music Night" title="Music Night" class="gallery-img">
            <p>Music Night</p>
          </td>
          <td>
            <img src="art_exhibition.jpg" alt="Art Exhibition" title="Art Exhibition" class="gallery-img">
            <p>Art Exhibition</p>
          </td>
          <td>
            <img src="tech_talk.jpg" alt="Tech Talk" title="Tech Talk" class="gallery-img">
            <p>Tech Talk</p>
          </td>
        </tr>
        <tr>
          <td>
            <img src="community_cleanup.jpg" alt="Community Cleanup" title="Community Cleanup" class="gallery-img">
            <p>Community Cleanup</p>
          </td>
          <td>
            <img src="food_fest.jpg" alt="Food Fest" title="Food Fest" class="gallery-img">
            <p>Food Fest</p>
          </td>
          <td>
            <img src="coding_workshop.jpg" alt="Coding Workshop" title="Coding Workshop" class="gallery-img">
            <p>Coding Workshop</p>
          </td>
        </tr>
      </table>
    </section>
    <!-- Event Registration Form -->
  <section id="registration">
  <h2>Event Registration</h2>

  <form id="eventForm" onsubmit="handleSubmit(event)">
    <label for="name">Full Name:</label><br>
    <input type="text" id="name" name="name" placeholder="Enter your full name" required autofocus><br><br>

    <label for="email">Email Address:</label><br>
    <input type="email" id="email" name="email" placeholder="Enter your email" required><br><br>

    <label for="date">Event Date:</label><br>
    <input type="date" id="date" name="date" required><br><br>

    <label for="eventType">Event Type:</label><br>
    <select id="eventType" name="eventType" required>
      <option value="">--Select an event--</option>
      <option value="music">Music Night</option>
      <option value="art">Art Exhibition</option>
      <option value="tech">Tech Talk</option>
      <option value="food">Food Fest</option>
    </select><br><br>

    <label for="message">Message:</label><br>
    <textarea id="message" name="message" rows="4" cols="40" placeholder="Add any notes..."></textarea><br><br>

    <button type="submit">Register</button>
    <br><br>
    <output id="confirmation"></output>
  </form>
</section>
<!-- Event Feedback Section -->
<section id="feedback">
  <h2>Event Feedback</h2>

  <form id="feedbackForm">
    <label for="phone">Phone Number:</label><br>
    <input type="text" id="phone" name="phone" placeholder="Enter 10-digit phone number" onblur="validatePhone()" required><br><br>

    <label for="eventFee">Select Event:</label><br>
    <select id="eventFee" onchange="showFee()">
      <option value="">--Select an Event--</option>
      <option value="10">Music Night - $10</option>
      <option value="15">Art Exhibition - $15</option>
      <option value="20">Tech Talk - $20</option>
    </select><br>
    <p><strong>Event Fee:</strong> $<span id="feeDisplay">0</span></p>

    <label for="feedbackText">Your Feedback:</label><br>
    <textarea id="feedbackText" rows="4" cols="50" placeholder="Type your feedback..." onkeyup="countCharacters()"></textarea><br>
    <p>Character Count: <span id="charCount">0</span></p>

    <button type="button" onclick="submitFeedback()">Submit Feedback</button>
  </form>

  <h3>Double-click the image to enlarge:</h3>
  <img src="event_preview.jpg" alt="Event Preview" id="eventImage" ondblclick="toggleImageSize()" style="width: 200px; cursor: zoom-in; border: 1px solid #ccc; margin-top: 10px;">
</section>
<!-- Video Invite Section -->
<section id="videoInvite">
  <h2>Event Promo Video</h2>

  <video id="promoVideo" width="480" controls oncanplay="videoReadyMessage()">
    <source src="event_promo.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>

  <p id="videoStatus" style="color: green; font-weight: bold; margin-top: 10px;"></p>
</section>
<!-- User Preferences Section -->
<section id="userPreferences">
  <h2>Your Preferred Event Type</h2>

  <label for="preferredEvent">Choose an Event Type:</label><br>
  <select id="preferredEvent" onchange="savePreference()">
    <option value="">-- Select --</option>
    <option value="Music Night">Music Night</option>
    <option value="Art Exhibition">Art Exhibition</option>
    <option value="Tech Talk">Tech Talk</option>
  </select><br><br>

  <button onclick="clearPreferences()">Clear Preferences</button>
  <p id="preferenceStatus" style="color: green; font-weight: bold;"></p>
</section>
<section id="geoLocation">
  <h2>Find Nearby Events</h2>
  <button onclick="findNearbyEvents()">Find Nearby Events</button>
  <p id="geoStatus"></p>
  <p id="coordinates"></p>
</section>


  </main>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Portal. All rights reserved.</p>
  </footer>
  <script>
  function validatePhone() {
    const phone = document.getElementById("phone").value.trim();
    const phoneRegex = /^\d{10}$/;
    if (!phoneRegex.test(phone)) {
      alert("Please enter a valid 10-digit phone number.");
      document.getElementById("phone").focus();
    }
  }

  function showFee() {
    const fee = document.getElementById("eventFee").value;
    document.getElementById("feeDisplay").textContent = fee || "0";
  }

  function countCharacters() {
    const text = document.getElementById("feedbackText").value;
    document.getElementById("charCount").textContent = text.length;
  }

  function submitFeedback() {
    alert("Thank you! Your feedback has been submitted.");
    document.getElementById("feedbackForm").reset();
    document.getElementById("feeDisplay").textContent = "0";
    document.getElementById("charCount").textContent = "0";
  }

  function toggleImageSize() {
    const img = document.getElementById("eventImage");
    img.classList.toggle("enlarged");
  }
   function videoReadyMessage() {
    document.getElementById("videoStatus").textContent = "Video ready to play!";
  }

  window.onbeforeunload = function () {
    const form = document.getElementById("feedbackForm");
    if (form && form.querySelector("textarea").value.trim() !== "") {
      return "You have unsaved feedback. Are you sure you want to leave?";
    }
  };
   // Save selected preference to localStorage
  function savePreference() {
    const event = document.getElementById("preferredEvent").value;
    if (event) {
      localStorage.setItem("preferredEvent", event);
      document.getElementById("preferenceStatus").textContent = `Saved: ${event}`;
    }
  }

  // Restore preference on page load
  window.onload = function () {
    const savedEvent = localStorage.getItem("preferredEvent");
    if (savedEvent) {
      document.getElementById("preferredEvent").value = savedEvent;
      document.getElementById("preferenceStatus").textContent = `Restored: ${savedEvent}`;
    }
  };

  // Clear both localStorage and sessionStorage
  function clearPreferences() {
    localStorage.clear();
    sessionStorage.clear();
    document.getElementById("preferredEvent").value = "";
    document.getElementById("preferenceStatus").textContent = "Preferences cleared.";
  }


  function findNearbyEvents() {
    const status = document.getElementById('geoStatus');
    const coords = document.getElementById('coordinates');

    if (!navigator.geolocation) {
      status.textContent = "Geolocation is not supported by your browser.";
      return;
    }

    status.textContent = "Locating…";
    coords.textContent = "";

    navigator.geolocation.getCurrentPosition(success, error, {
      enableHighAccuracy: true,
      timeout: 10000, // 10 seconds
      maximumAge: 0
    });

    function success(position) {
      const latitude = position.coords.latitude.toFixed(6);
      const longitude = position.coords.longitude.toFixed(6);
      status.textContent = "Location found!";
      coords.textContent = `Latitude: ${latitude}, Longitude: ${longitude}`;
      // You can add logic here to find nearest event based on coords
    }

    function error(err) {
      switch(err.code) {
        case err.PERMISSION_DENIED:
          status.textContent = "Permission denied. Please allow location access.";
          break;
        case err.POSITION_UNAVAILABLE:
          status.textContent = "Location information is unavailable.";
          break;
        case err.TIMEOUT:
          status.textContent = "Request timed out. Please try again.";
          break;
        default:
          status.textContent = "An unknown error occurred.";
          break;
      }
    }
  }

</script>

</body>
</html>
